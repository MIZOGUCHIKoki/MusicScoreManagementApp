\chapter{機能設計}
\section{ユーザ}
\subsection*{ユーザ情報に関する操作}
\newcommand{\fdbox}[2]{\noindent\fbox{\noindent\textbf{#1}}（p.\pageref{#2}；\figref{#2}）\par}
\fdbox{ユーザ登録}{ユーザ-ユーザ登録}
ユーザが，ユーザ名，メールアドレス（ユーザのメールアドレス），パスワードを入力し，規約に同意することでアカウントを作成できる．
メールアドレスは重複せず，パスワードは6文字以上20文字以下英数字で入力する必要がある．
入力内容に不備がない場合，ログイン済みの状態でトップページ画面に遷移する．\\
\fdbox{ユーザ編集}{ユーザ-ユーザ編集}
マイページ画面から，登録しているアカウント情報を変更できる機能である．
変更できる情報には，ユーザ名，メールアドレス，パスワードを変更できる．
無効な入力は受け付けない．
入力内容に不備がない場合，マイページ画面に遷移する．\\
\fdbox{ユーザ削除}{ユーザ-ユーザ削除}
ユーザがマイページ画面からアカウントを削除できる機能である．
確認メッセージを表示し，合意するとアカウント情報を完全に削除する．
アカウントを削除するとログイン画面に遷移する．
\subsection*{楽譜情報に関する操作}
\fdbox{楽譜データ登録}{ユーザ-楽譜データ登録}
ユーザがトップページ画面から，所有している楽譜を登録できる機能である．
登録するデータは曲名，作曲者，編曲者，グレード，使用楽器，演奏時間である．
ここでは，入力されたデータに不備がないか，また指定された文字列を使用しているかを自動で判定し，必要に応じて画面遷移することなくエラーメッセージを表示する．\\
\fdbox{楽譜データ編集}{ユーザ-楽譜データ編集}
ユーザがトップページ画面から，すでに登録されている曲から任意の曲を選択し，楽譜データに対して修正・更新する機能である．
編集する曲は楽譜一覧画面から選択することで編集画面に遷移できる．
変更されたデータに対しても楽譜データ登録機能と同様に，自動でチェックが行われる．\\
\fdbox{楽譜データ削除}{ユーザ-楽譜データ削除}
ユーザがトップページ画面から，すでに登録されている曲から任意の曲を選択し，楽譜データを削除する機能である．
削除された楽曲はデータベースから完全に消去されており，復元できない．さらに複数の楽曲を選択して同時に削除できない．
\section{管理者}
管理者としてのアカウントは1つのみである．
\fdbox{ユーザ編集}{管理者-ユーザ編集}
管理者がパスワードを入力することで，ユーザ情報を編集する機能である．
変更内容はメールアドレスやパスワードで，ユーザがパスワードを忘れた際に管理者が変更するための機能である．\\
\fdbox{ユーザ削除}{管理者-ユーザ削除}
管理者がパスワードを入力することで，ユーザのアカウントを削除する機能である．
ここで削除したユーザに関連する楽譜データは自動で削除される．\\
\fdbox{楽譜データ削除}{管理者-楽譜データ削除}
管理者がパスワードを入力することで，ユーザの特定の楽譜データを削除する機能である．\\
\fdbox{管理者情報編集}{管理者-管理者情報編集}
管理者が管理者自身のアカウント情報を編集する機能である．\\
\fdbox{広告登録機能}{管理者-広告登録機能}
管理者がGitHubの指定ディレクトリへ，命名規則に従った広告となる画像ファイルをアップロードする．
GitHub上のCDが自動的に広告を本番環境へ適用する．
\section{共通}
\fdbox{ログイン}{共通-ログイン}
管理者とユーザはブラウザのアドレスバーに本サービスのURLを入力することにより，ルートページにアクセスする．
ルートページでは，ユーザはIDとパスワードを入力することでログインする．
管理者であるかどうかは，メールアドレスで判別する．\\
\fdbox{ログアウト}{共通-ログアウト}
管理者とユーザはマイページ画面から，ログアウトボタンを選択することでログアウトする．
ログアウトに伴い，ログイン時間の記録などの処理が行われる．
\newcommand{\icd}[2]{\begin{figure}[p]\centering\includegraphics[keepaspectratio,width=.8\textwidth]{functionalDesign/#1.pdf}\caption{#2}\label{#2}\end{figure}}
    \icd{211-機能設計-利用者側-ユーザ登録}{ユーザ-ユーザ登録}
    \icd{212-機能設計-利用者側-ユーザ編集}{ユーザ-ユーザ編集}
    \icd{213-機能設計-利用者側-ユーザ削除}{ユーザ-ユーザ削除}
    \icd{214-機能設計-利用者側-楽譜データ登録}{ユーザ-楽譜データ登録}
    \icd{215-機能設計-利用者側-楽譜データ編集}{ユーザ-楽譜データ編集}
    \icd{216-機能設計-利用者側-楽譜データ削除}{ユーザ-楽譜データ削除}
    \icd{221-機能設計-管理者側-ユーザ編集}{管理者-ユーザ編集}
    \icd{222-機能設計-管理者側-ユーザ削除}{管理者-ユーザ削除}
    \icd{223-機能設計-管理者側-楽譜データ削除}{管理者-楽譜データ削除}
    \icd{224-機能設計-管理者側-管理者情報編集機能}{管理者-管理者情報編集}
    \icd{217-機能設計-利用者側-ログイン}{共通-ログイン}
    \icd{218-機能設計-利用者側-ログアウト}{共通-ログアウト}
    \icd{225-機能設計-管理者側-広告登録機能}{管理者-広告登録機能}
